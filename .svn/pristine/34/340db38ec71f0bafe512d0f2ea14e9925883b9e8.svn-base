<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="ManPowerManagement_organization_Default" %>
<%@ Register Src="~/ResourceMenu.ascx" TagPrefix="uc1" TagName="ResourceMenu" %>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
    <link rel="stylesheet" href="<%=ResolveUrl("~/Content/bootstrap.css") %>"/>
    <link rel="stylesheet" href="<%=ResolveUrl("~/Content/font-awesome.css") %>"/>
    <link rel="stylesheet" href="<%=ResolveUrl("~/Content/g.css") %>" />
    <style>
        .owner{
            color:darkgray;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <uc1:ResourceMenu runat="server" ID="ResourceMenu" />
    <strong>PIMS / Resource Management</strong> > Organization
        <h4 class="text-center">Organization</h4>
    <div class="container" style="border:1px dotted gray;font-size:16px;">
            <%
                var db = new PPPEntities();
                foreach(var itemLv0 in db.TOrganization.Where(x=>x.LevelNo == 0))
                {
                    %><%=itemLv0.Title %> <span class="owner"> <%=PeopleHelper.GetPeopleName(itemLv0.OwnerId.ToString()) %></span><br/>
                <%
                    foreach (var itemLv1 in db.TOrganization.Where(x => x.LevelNo == 1))
                    {
                        %><%=MPMHelper.FmtTitle(itemLv1.Title, 1) %> <span class="owner"> <%=PeopleHelper.GetPeopleName(itemLv1.OwnerId.ToString()) %></span> <div style="display:inline;"><a href="javascript:void(0);" class="add-item" data-id="<%=itemLv1.Id %>" data-levelno="<%=itemLv1.LevelNo %>">Add Child</a> | <a href="javascript:void(0);" class="edit-item" data-id="<%=itemLv1.Id %>" data-ownerid="<%=itemLv1.OwnerId %>" data-owner="<%=PeopleHelper.GetPeopleName(itemLv1.OwnerId.ToString()) %>" data-parentid="<%=itemLv1.ParentId %>" data-title="<%=itemLv1.Title %>" data-levelno="<%=itemLv1.LevelNo %>">Edit</a> | <a href="javascript:void(0);" class="delete-item" data-id="<%=itemLv1.Id %>">Delete</a></div><br/><%
                        foreach (var itemLv2 in db.TOrganization.Where(x => x.LevelNo == 2 && x.ParentId == itemLv1.Id).OrderBy(x=>x.LevelPos))
                        {
                            %><%=MPMHelper.FmtTitle(itemLv2.Title, 2) %>  <span class="owner"> <%=PeopleHelper.GetPeopleName(itemLv2.OwnerId.ToString()) %></span> <div style="display:inline;"><a href="javascript:void(0);" class="add-item" data-id="<%=itemLv2.Id %>" data-levelno="<%=itemLv2.LevelNo %>" data-parentid="<%=itemLv2.ParentId %>">Add Child</a> | <a href="javascript:void(0);" class="edit-item" data-id="<%=itemLv2.Id %>" data-ownerid="<%=itemLv2.OwnerId %>" data-owner="<%=PeopleHelper.GetPeopleName(itemLv2.OwnerId.ToString()) %>" data-parentid="<%=itemLv2.ParentId %>" data-title="<%=itemLv2.Title %>" data-levelno="<%=itemLv2.LevelNo %>">Edit</a> | <a href="javascript:void(0);" class="delete-item" data-id="<%=itemLv2.Id %>">Delete</a></div><br/><%

                            foreach (var itemLv3 in db.TOrganization.Where(x => x.LevelNo == 3 && x.ParentId == itemLv2.Id).OrderBy(x=>x.LevelPos))
                            {
                                %><%=MPMHelper.FmtTitle(itemLv3.Title, 3) %>  <span class="owner"> <%=PeopleHelper.GetPeopleName(itemLv3.OwnerId.ToString()) %></span> <div style="display:inline;"><a href="javascript:void(0);" class="add-item" data-id="<%=itemLv3.Id %>" data-levelno="<%=itemLv3.LevelNo %>" data-parentid="<%=itemLv3.ParentId %>">Add Child</a> | <a href="javascript:void(0);" class="edit-item" data-id="<%=itemLv3.Id %>" data-ownerid="<%=itemLv3.OwnerId %>" data-owner="<%=PeopleHelper.GetPeopleName(itemLv3.OwnerId.ToString()) %>" data-parentid="<%=itemLv3.ParentId %>" data-title="<%=itemLv3.Title %>" data-levelno="<%=itemLv3.LevelNo %>">Edit</a> | <a href="javascript:void(0);" class="delete-item" data-id="<%=itemLv3.Id %>">Delete</a></div><br/><%
                                
                                foreach (var itemLv4 in db.TOrganization.Where(x => x.LevelNo == 4 && x.ParentId == itemLv3.Id).OrderBy(x=>x.LevelPos))
                                {
                                    %><%=MPMHelper.FmtTitle(itemLv4.Title, 4) %>  <span class="owner"> <%=PeopleHelper.GetPeopleName(itemLv4.OwnerId.ToString()) %></span> <div style="display:inline;"><a href="javascript:void(0);" class="add-item" data-id="<%=itemLv4.Id %>" data-levelno="<%=itemLv4.LevelNo %>" data-parentid="<%=itemLv4.ParentId %>">Add Child</a> | <a href="javascript:void(0);" class="edit-item" data-id="<%=itemLv4.Id %>" data-ownerid="<%=itemLv4.OwnerId %>" data-owner="<%=PeopleHelper.GetPeopleName(itemLv4.OwnerId.ToString()) %>" data-parentid="<%=itemLv4.ParentId %>" data-title="<%=itemLv4.Title %>" data-levelno="<%=itemLv4.LevelNo %>">Edit</a> | <a href="javascript:void(0);" class="delete-item" data-id="<%=itemLv4.Id %>">Delete</a></div><br/><%
                                    foreach (var itemLv5 in db.TOrganization.Where(x => x.LevelNo == 5 && x.ParentId == itemLv4.Id).OrderBy(x=>x.LevelPos))
                                    {
                                        %><%=MPMHelper.FmtTitle(itemLv5.Title, 5) %>  <span class="owner"> <%=PeopleHelper.GetPeopleName(itemLv4.OwnerId.ToString()) %></span> <div style="display:inline;"><a href="javascript:void(0);" class="add-item" data-id="<%=itemLv5.Id %>" data-levelno="<%=itemLv5.LevelNo %>" data-parentid="<%=itemLv5.ParentId %>">Add Child</a> | <a href="javascript:void(0);" class="edit-item" data-id="<%=itemLv5.Id %>" data-ownerid="<%=itemLv5.OwnerId %>" data-owner="<%=PeopleHelper.GetPeopleName(itemLv5.OwnerId.ToString()) %>" data-parentid="<%=itemLv5.ParentId %>" data-title="<%=itemLv5.Title %>" data-levelno="<%=itemLv5.LevelNo %>">Edit</a> | <a href="javascript:void(0);" class="delete-item" data-id="<%=itemLv5.Id %>">Delete</a></div><br/><%
                            
                                    }
                                }
                            }
                        }
                    }
                }
                %>
        </div>
    </form>
        <script src="<%=ResolveUrl("~/Scripts/jquery-1.9.1.min.js")%>" ></script>
        <script src="<%=ResolveUrl("~/Scripts/bootstrap.js")%>" ></script>
        <script src="<%=ResolveUrl("~/ManPowerManagement/js/organization.js")%>" ></script>
        <script src="<%=ResolveUrl("~/Scripts/respond.js")%>" ></script>

<!-- 对话框开始 -->
        <div class="modal " id="modalDialog-Create">
            <div class="modal-dialog">
                <div class="modal-content" style="border: 0px solid red; ">
                    <div class="modal-header">
                        <button type="button" class="close " data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    	<h4 class="modal-title">Add Child</h4>
                    </div>
                    <div class="modal-body">
                        <!-- 对话框内容开始 -->
                        <div class="">
                            <div class="">
                                <label>Description</label>
                                <input type="text" id="newTitle" name="newTitle" runat="server" class="form-control"/>
                                <label class="">Level No (max support level no is 5)</label>
                                <input type="text" class="form-control" id="newLevelNo" name ="newLevelNo" runat="server" readonly="readonly"/>
                                <label class="">Pos</label>
                                <input type="text" class="form-control" id="newPos" name ="newPos" value="1" runat="server"/>
                                <label class="">Owner Id</label>
                                <input type="text" class="form-control" id="newOwnerId" name ="newOwnerId" runat="server"/>
                                <label class="">Name</label>
                                <input type="text" class="form-control" id="newOwner" name ="newOwner" runat="server" readonly="readonly"/>
                                <input type="hidden" class="form-control" id="newParentId" name ="newParentId" runat="server" readonly="readonly"/>
                            </div>
                        </div>
                        <!-- 对话框内容结束 -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button id="btnCreate" type="button" class="btn btn-primary">Save</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
<!-- 对话框结束 -->

<!-- 对话框开始 -->
        <div class="modal" id="modalDialog-edit">
            <div class="modal-dialog">
                <div class="modal-content" style="border: 0px solid red; ">
                    <div class="modal-header">
                        <button type="button" class="close " data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    	<h4 class="modal-title">Edit Organization</h4>
                    </div>
                    <div class="modal-body">
                        <!-- 对话框内容开始 -->
                        <div class="">
                            <div class="">
                                <label>Id</label>
                                <input type="text" id="editId" name="editId" runat="server" class="form-control" readonly="readonly"/>
                                <label>Description</label>
                                <input type="text" id="editTitle" name="editTitle" runat="server" class="form-control"/>
                                <label class="">Level No</label>
                                <input type="text" class="form-control" id="editLevelNo" name ="editLevelNo" runat="server" readonly="readonly"/>
                                <label class="">Pos</label>
                                <input type="text" class="form-control" id="editPos" name ="editPos" value="1" runat="server"/>
                                <label class="">Owner Id</label>
                                <input type="text" class="form-control" id="editOwnerId" name ="editOwnerId" runat="server"/>
                                <label class="">Name</label>
                                <input type="text" class="form-control" id="editOwner" name ="editOwner" runat="server" readonly="readonly"/>
                                <input type="hidden" class="form-control" id="editParentId" name ="editParentId" runat="server" readonly="readonly"/>

                            </div>
                        </div>
                        <!-- 对话框内容结束 -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button id="btnEdit" type="button" class="btn btn-primary">Save</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
<!-- 对话框结束 -->

<!-- 对话框开始 -->
        <div class="modal " id="modalDialog-Delete">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close " data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    	<h4 class="modal-title">Delete confirm</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label >Confirm delete current item?</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button id="btnDelete" type="button" class="btn btn-danger">Delete</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
<!-- 对话框结束 -->
</body>
</html>
